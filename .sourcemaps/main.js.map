{"version":3,"file":"main.js","sources":["../../src/providers/fcm/fcm.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/pages/index.ts"],"sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { Injectable } from '@angular/core';\r\nimport { Firebase } from '@ionic-native/firebase';\r\nimport { Platform } from 'ionic-angular';\r\nimport { AngularFirestore } from 'angularfire2/firestore';\r\nvar FcmProvider = /** @class */ (function () {\r\n    function FcmProvider(firebaseNative, afs, platform) {\r\n        this.firebaseNative = firebaseNative;\r\n        this.afs = afs;\r\n        this.platform = platform;\r\n    }\r\n    FcmProvider.prototype.getToken = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var token;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.firebaseNative.getToken()];\r\n                    case 1:\r\n                        token = _a.sent();\r\n                        return [4 /*yield*/, this.firebaseNative.grantPermission()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [2 /*return*/, this.saveTokenToFirestore(token)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FcmProvider.prototype.saveTokenToFirestore = function (token) {\r\n        if (!token)\r\n            return;\r\n        var devicesRef = this.afs.collection('devices');\r\n        var docData = {\r\n            token: token,\r\n            userId: 'testUser',\r\n        };\r\n        return devicesRef.doc(token).set(docData);\r\n    };\r\n    FcmProvider.prototype.subscribeToTopic = function (topic) {\r\n        return this.firebaseNative.subscribe(topic);\r\n    };\r\n    FcmProvider.prototype.listenToNotifications = function () {\r\n        return this.firebaseNative.onNotificationOpen();\r\n    };\r\n    FcmProvider = __decorate([\r\n        Injectable(),\r\n        __metadata(\"design:paramtypes\", [Firebase,\r\n            AngularFirestore,\r\n            Platform])\r\n    ], FcmProvider);\r\n    return FcmProvider;\r\n}());\r\nexport { FcmProvider };\r\n//# sourceMappingURL=fcm.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/providers/fcm/fcm.ts\n// module id = 357\n// module chunks = 2","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\nimport { AppModule } from './app.module';\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n//# sourceMappingURL=main.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/main.ts\n// module id = 360\n// module chunks = 2","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { ErrorHandler, NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { Camera } from '@ionic-native/camera';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\r\nimport { AngularFireModule } from 'angularfire2';\r\nimport { AngularFireStorageModule } from 'angularfire2/storage';\r\nimport { AngularFirestoreModule } from 'angularfire2/firestore';\r\nimport { AngularFireAuthModule } from 'angularfire2/auth';\r\nimport { AngularFireDatabaseModule } from 'angularfire2/database';\r\nimport { MyApp } from './app.component';\r\nimport { Firebase } from \"@ionic-native/firebase\";\r\nimport { FcmProvider } from \"../providers/fcm/fcm\";\r\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\r\nimport * as firebase from \"firebase\";\r\nvar config = {\r\n    apiKey: \"AIzaSyCUJ1n1KTJHDaDdVmpY686z8AAle8GAbQQ\",\r\n    authDomain: \"dship-6fc02.firebaseapp.com\",\r\n    databaseURL: \"https://dship-6fc02.firebaseio.com\",\r\n    projectId: \"dship-6fc02\",\r\n    storageBucket: \"dship-6fc02.appspot.com\",\r\n    messagingSenderId: \"107565011509\"\r\n};\r\nfirebase.initializeApp(config);\r\nvar AppModule = /** @class */ (function () {\r\n    function AppModule() {\r\n    }\r\n    AppModule = __decorate([\r\n        NgModule({\r\n            declarations: [\r\n                MyApp\r\n            ],\r\n            imports: [\r\n                BrowserModule,\r\n                AngularFireModule.initializeApp(config),\r\n                AngularFirestoreModule.enablePersistence(),\r\n                AngularFireAuthModule,\r\n                AngularFireStorageModule,\r\n                AngularFireDatabaseModule,\r\n                BrowserAnimationsModule,\r\n                TranslateModule.forRoot({}),\r\n                IonicModule.forRoot(MyApp, {}, {\r\n                    links: [\r\n                        { loadChildren: '../pages/home/home.module#HomePageModule', name: 'HomePage', segment: 'home', priority: 'low', defaultHistory: [] },\r\n                        { loadChildren: '../pages/login/login.module#LoginPageModule', name: 'login', segment: 'login', priority: 'low', defaultHistory: [] }\r\n                    ]\r\n                }),\r\n            ],\r\n            bootstrap: [IonicApp],\r\n            entryComponents: [\r\n                MyApp,\r\n            ],\r\n            providers: [\r\n                Firebase,\r\n                AngularFireModule,\r\n                Camera,\r\n                StatusBar,\r\n                FcmProvider,\r\n                // Keep this to enable Ionic's runtime error handling during development\r\n                { provide: ErrorHandler, useClass: IonicErrorHandler },\r\n            ]\r\n        })\r\n    ], AppModule);\r\n    return AppModule;\r\n}());\r\nexport { AppModule };\r\n//# sourceMappingURL=app.module.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.module.ts\n// module id = 492\n// module chunks = 2","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nimport { Component, ViewChild, } from '@angular/core';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { Nav, Platform, ToastController } from 'ionic-angular';\r\nimport { FcmProvider } from \"../providers/fcm/fcm\";\r\nimport { Home, Login } from \"../pages\";\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\nvar MyApp = /** @class */ (function () {\r\n    function MyApp(platform, statusBar, fcm, toastCtrl, afs) {\r\n        var _this = this;\r\n        this.statusBar = statusBar;\r\n        this.fcm = fcm;\r\n        this.toastCtrl = toastCtrl;\r\n        this.afs = afs;\r\n        this.rootPage = '';\r\n        this.check();\r\n        platform.ready().then(function () {\r\n            statusBar.styleDefault();\r\n            _this.statusBar.backgroundColorByHexString('#f2af37');\r\n            // this.menu.swipeEnable(false)\r\n            //  func.sync()\r\n            // Get a FCM token\r\n            fcm.listenToNotifications()\r\n                .subscribe(function (res) {\r\n                if (res.wasTapped) {\r\n                    _this.nav.setRoot(res.page, { pageId: res.title });\r\n                }\r\n                else {\r\n                    var toast = toastCtrl.create({\r\n                        message: res.body,\r\n                        duration: 10000,\r\n                        showCloseButton: true,\r\n                        closeButtonText: 'View',\r\n                        dismissOnPageChange: true,\r\n                        position: 'top'\r\n                    });\r\n                    toast.present();\r\n                    toast.onDidDismiss(function (data, role) {\r\n                        // console.log('Dismissed toast');\r\n                        if (role == \"close\") {\r\n                            _this.nav.push(res.page, { pageId: res.title });\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n    MyApp.prototype.check = function () {\r\n        var _this = this;\r\n        this.afs.authState.subscribe(function (res) {\r\n            console.log(\"checkingggg\");\r\n            if (res && res.uid) {\r\n                _this.rootPage = Home;\r\n                _this.uid = res.uid;\r\n            }\r\n            else {\r\n                _this.rootPage = Login;\r\n            }\r\n        });\r\n    };\r\n    __decorate([\r\n        ViewChild(Nav),\r\n        __metadata(\"design:type\", Nav)\r\n    ], MyApp.prototype, \"nav\", void 0);\r\n    MyApp = __decorate([\r\n        Component({template:/*ion-inline-start:\"C:\\Users\\Lester\\Desktop\\Phone Auth\\src\\app\\app.html\"*/'\\n\\n<ion-nav main #content [root]=\"rootPage\" > </ion-nav>\\n\\n'/*ion-inline-end:\"C:\\Users\\Lester\\Desktop\\Phone Auth\\src\\app\\app.html\"*/\r\n        }),\r\n        __metadata(\"design:paramtypes\", [Platform,\r\n            StatusBar,\r\n            FcmProvider,\r\n            ToastController,\r\n            AngularFireAuth])\r\n    ], MyApp);\r\n    return MyApp;\r\n}());\r\nexport { MyApp };\r\n//# sourceMappingURL=app.component.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.ts\n// module id = 638\n// module chunks = 2","// The page the user lands on after opening the app and without a session\r\nexport var Login = 'login';\r\nexport var Home = 'HomePage';\r\n//# sourceMappingURL=index.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/index.ts\n// module id = 639\n// module chunks = 2"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC/FA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpFA;AAAA;AAAA;AACA;AACA;AACA;;;;A","sourceRoot":""}